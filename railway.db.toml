# Railway Deployment Configuration - Database Service

[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile.db"

# Optional: Watch patterns to trigger deployments only when specific files change
# Uncomment to enable conditional deployments (saves build time and costs)
watchPatterns = ["Dockerfile.db", "db_entrypoint.sh", "DB/**"]

# ═══════════════════════════════════════════════════════════
# Deploy Configuration
# ═══════════════════════════════════════════════════════════
[deploy]
# PostgreSQL uses custom entrypoint that downloads dump from GitHub
# No need to override startCommand

# Restart policy - ALWAYS restart for database
restartPolicyType = "ALWAYS"
restartPolicyMaxRetries = 10

# Graceful shutdown configuration
# Give PostgreSQL time for clean shutdown
drainingSeconds = 30
